{% extends "_base.html" %} 
{% block title %}
Grade Book
{% endblock %}
{% block css %}
<link href="https://cdn.datatables.net/v/dt/dt-2.3.3/fc-5.0.4/fh-4.0.3/datatables.min.css" rel="stylesheet" integrity="sha384-Vjo6w3LvETxs8325VejWKrmS6Ftn1oJGtDL8U5c99JYHS/jhfUFPjRAxXyLzDI2i" crossorigin="anonymous">
<link href="/staticAssets/index.css" rel="stylesheet" media="screen" />

{% endblock %} 
{% block content %}
<h1>Grade Book for {{course.course_name}}</h1>

{{table_html|safe}}

<button id="export" data-export="export">Download Gradebook</button>

<h4>Quick Links to Student Progress</h4>

<ol>
{% for row in pt %}
<li>{{pt[row]}} <a href="/runestone/dashboard/studentreport?id={{row}}">{{row}}</a></li>
{% endfor %}
</ol>


 
<script src="https://cdn.datatables.net/v/dt/dt-2.3.3/fc-5.0.4/fh-4.0.3/datatables.min.js" integrity="sha384-RshOJ4bI2YJrQsNAkDx7oG/ElamRAHG6nwX6JSlUI9ePWip7Ko2s8CerHqEo3xZm" crossorigin="anonymous"></script>

<script type="text/javascript" src="/staticAssets/js/jquery.tabletoCSV.js"></script>
<script>
    var gbTable;
    $(document).ready( function () {
        let t = document.getElementById('table');
        t.classList.add('stripe');
        gbTable = new DataTable("#table",{
            paging: false,    
            scrollY: 400,
            scrollX: true,
            fixedHeader: true,
            fixedColumns:   {
                start: 2
            },
        });
        // hide teh username column
        gbTable.column(3).visible(false);
    });


    $(function () {
        $("#export").click(function () {
            // temporarily show the username column so it gets exported
            gbTable.column(3).visible(true);
            $("#table").tableToCSV();
            gbTable.column(3).visible(false);
        });
    });

</script>

{% endblock %} 

{% block js %}
<script src="/staticAssets/assignment/student.js"></script>
{% endblock %}
